{"version":3,"names":["React","ThemeContext","withDefaultProps","WrappedComponent","componentName","defaultProps","PureComponent","render","theme","context","props","propsFromTheme","components","variant","variants","mergedProps"],"sources":["withDefaultProps.tsx"],"sourcesContent":["import React from 'react';\nimport { ThemeContext, ThemeType } from '../theme';\nimport { DefaultProps, VariantPropsType } from '../types';\n\nexport function withDefaultProps<\n  Props extends object,\n  Defaults extends DefaultProps<Props> = {}\n>(\n  WrappedComponent: React.ComponentClass<Props & Defaults>,\n  componentName: keyof NonNullable<ThemeType['components']>,\n  defaultProps: Defaults\n) {\n  type Variant = Props & VariantPropsType;\n  return class extends React.PureComponent<Variant> {\n    static contextType = ThemeContext;\n    // using `declare` requires babel plugin which doesn't seem to work\n    // class related components & HOC's should be refactored anyway\n    // @ts-ignore\n    context!: React.ContextType<typeof ThemeContext>;\n\n    render() {\n      const theme = this.context.theme;\n\n      if (!componentName) {\n        return <WrappedComponent {...this.props} {...defaultProps} />;\n      }\n\n      let propsFromTheme = {\n        ...(theme.components?.[componentName] ?? {}),\n        ...(this.props.variant &&\n          //@ts-ignore\n          (theme.components?.[componentName]?.variants?.[this.props.variant] ??\n            {})),\n      };\n\n      delete propsFromTheme.variants;\n\n      const mergedProps = {\n        ...defaultProps,\n        ...propsFromTheme,\n        ...this.props,\n      };\n\n      return <WrappedComponent {...mergedProps} />;\n    }\n  };\n}\n"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,QAAwC,UAAxC;AAGA,OAAO,SAASC,gBAAT,CAILC,gBAJK,EAKLC,aALK,EAMLC,YANK,EAOL;EAAA;;EAEA,gBAAO,cAAcL,KAAK,CAACM,aAApB,CAA2C;IAAA;MAAA;;MAAA;IAAA;;IAOhDC,MAAM,GAAG;MAAA;;MACP,MAAMC,KAAK,GAAG,KAAKC,OAAL,CAAaD,KAA3B;;MAEA,IAAI,CAACJ,aAAL,EAAoB;QAClB,oBAAO,oBAAC,gBAAD,eAAsB,KAAKM,KAA3B,EAAsCL,YAAtC,EAAP;MACD;;MAED,IAAIM,cAAc,GAAG,EACnB,IAAI,sBAAAH,KAAK,CAACI,UAAN,wEAAmBR,aAAnB,MAAqC,EAAzC,CADmB;QAEnB,IAAI,KAAKM,KAAL,CAAWG,OAAX,MACF;QACC,uBAAAL,KAAK,CAACI,UAAN,mGAAmBR,aAAnB,2GAAmCU,QAAnC,kFAA8C,KAAKJ,KAAL,CAAWG,OAAzD,MACC,EAHA,CAAJ;MAFmB,CAArB;MAQA,OAAOF,cAAc,CAACG,QAAtB;MAEA,MAAMC,WAAW,GAAG,EAClB,GAAGV,YADe;QAElB,GAAGM,cAFe;QAGlB,GAAG,KAAKD;MAHU,CAApB;MAMA,oBAAO,oBAAC,gBAAD,EAAsBK,WAAtB,CAAP;IACD;;EA/B+C,CAAlD,yCACuBd,YADvB;AAiCD"}