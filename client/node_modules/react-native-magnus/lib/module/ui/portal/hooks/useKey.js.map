{"version":3,"names":["React","keyGenerator","Math","random","toString","substr","useKey","usedKeys","useRef","generateKey","foundUniqueKey","newKey","tries","current","includes","Date","now","floor","push","removeKey","key","filter","k"],"sources":["useKey.ts"],"sourcesContent":["import * as React from 'react';\n\ninterface IUseKey {\n  generateKey(): string;\n  removeKey(key: string): void;\n}\n\n// Generates a random key\nconst keyGenerator = (): string => {\n  return `portalize_${Math.random().toString(36).substr(2, 16)}-${Math.random()\n    .toString(36)\n    .substr(2, 16)}-${Math.random().toString(36).substr(2, 16)}`;\n};\n\n// Custom hook that checks for uniqueness and retries if clashes\nexport const useKey = (): IUseKey => {\n  const usedKeys = React.useRef<Array<string>>([]);\n\n  const generateKey = (): string => {\n    let foundUniqueKey = false;\n    let newKey = '';\n    let tries = 0;\n\n    while (!foundUniqueKey && tries < 3) {\n      // limit number of tries to stop endless loop of pain\n      tries++;\n      newKey = keyGenerator();\n\n      if (!usedKeys.current.includes(newKey)) {\n        foundUniqueKey = true;\n      }\n    }\n\n    // will only run if exited while loop without finding a unique key\n    if (!foundUniqueKey) {\n      newKey = `portalize_${Date.now()}_${Math.floor(Math.random() * 1000)}`; // fallback method\n    }\n\n    usedKeys.current.push(newKey);\n    return newKey;\n  };\n\n  // Removes our key to make it 'available' again\n  const removeKey = (key: string): void => {\n    usedKeys.current = usedKeys.current.filter((k) => k !== key);\n  };\n\n  return { generateKey, removeKey };\n};\n"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;;AAOA;AACA,MAAMC,YAAY,GAAG,MAAc;EACjC,OAAQ,aAAYC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,EAAqC,EAArC,CAAyC,IAAGH,IAAI,CAACC,MAAL,GAC7DC,QAD6D,CACpD,EADoD,EAE7DC,MAF6D,CAEtD,CAFsD,EAEnD,EAFmD,CAE/C,IAAGH,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,EAAqC,EAArC,CAAyC,EAF7D;AAGD,CAJD,C,CAMA;;;AACA,OAAO,MAAMC,MAAM,GAAG,MAAe;EACnC,MAAMC,QAAQ,GAAGP,KAAK,CAACQ,MAAN,CAA4B,EAA5B,CAAjB;;EAEA,MAAMC,WAAW,GAAG,MAAc;IAChC,IAAIC,cAAc,GAAG,KAArB;IACA,IAAIC,MAAM,GAAG,EAAb;IACA,IAAIC,KAAK,GAAG,CAAZ;;IAEA,OAAO,CAACF,cAAD,IAAmBE,KAAK,GAAG,CAAlC,EAAqC;MACnC;MACAA,KAAK;MACLD,MAAM,GAAGV,YAAY,EAArB;;MAEA,IAAI,CAACM,QAAQ,CAACM,OAAT,CAAiBC,QAAjB,CAA0BH,MAA1B,CAAL,EAAwC;QACtCD,cAAc,GAAG,IAAjB;MACD;IACF,CAb+B,CAehC;;;IACA,IAAI,CAACA,cAAL,EAAqB;MACnBC,MAAM,GAAI,aAAYI,IAAI,CAACC,GAAL,EAAW,IAAGd,IAAI,CAACe,KAAL,CAAWf,IAAI,CAACC,MAAL,KAAgB,IAA3B,CAAiC,EAArE,CADmB,CACqD;IACzE;;IAEDI,QAAQ,CAACM,OAAT,CAAiBK,IAAjB,CAAsBP,MAAtB;IACA,OAAOA,MAAP;EACD,CAtBD,CAHmC,CA2BnC;;;EACA,MAAMQ,SAAS,GAAIC,GAAD,IAAuB;IACvCb,QAAQ,CAACM,OAAT,GAAmBN,QAAQ,CAACM,OAAT,CAAiBQ,MAAjB,CAAyBC,CAAD,IAAOA,CAAC,KAAKF,GAArC,CAAnB;EACD,CAFD;;EAIA,OAAO;IAAEX,WAAF;IAAeU;EAAf,CAAP;AACD,CAjCM"}