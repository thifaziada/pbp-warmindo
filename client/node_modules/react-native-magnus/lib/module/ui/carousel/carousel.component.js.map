{"version":3,"names":["React","useDefaultProps","Div","ScrollDiv","CarouselItem","Carousel","incomingProps","props","showIndicators","children","renderIndicators","selectedPage","setSelectedPage","useState","totalPages","setTotalPages","totalContentWidth","setTotalContentWidth","items","useMemo","Children","map","child","isValidElement","type","console","warn","init","width","totalItems","length","getPage","event","widthOffset","nativeEvent","contentOffset","x","widthOfEachItem","page","internal_renderIndicators","Array","fill","_","index","flex","w","_h","data","contentSize","Item"],"sources":["carousel.component.tsx"],"sourcesContent":["import React from 'react';\nimport { NativeScrollEvent, NativeSyntheticEvent } from 'react-native';\nimport { useDefaultProps } from '../../utilities/useDefaultProps';\nimport { Div } from '../div/div.component';\nimport { ScrollDiv } from '../scrolldiv/scrolldiv.component';\n\nimport { CarouselProps, CompoundedCarousel } from './carousel.type';\nimport CarouselItem from './item.carousel';\n\nconst Carousel: CompoundedCarousel<CarouselProps> = (incomingProps) => {\n  const props = useDefaultProps('Carousel', incomingProps, {\n    showIndicators: true,\n  });\n\n  const { children, renderIndicators, showIndicators } = props;\n  const [selectedPage, setSelectedPage] = React.useState(1);\n  const [totalPages, setTotalPages] = React.useState(1);\n  const [totalContentWidth, setTotalContentWidth] = React.useState(0);\n\n  const items: JSX.Element[] = React.useMemo(() => {\n    return (\n      React.Children.map(children, (child) => {\n        if (!React.isValidElement(child)) {\n          return;\n        }\n\n        if (child.type === CarouselItem) {\n          return child;\n        }\n\n        console.warn(\n          'Only children of type Carousel.Item are allowed here. Any other child components will be ignored.'\n        );\n        return null;\n      }) ?? []\n    );\n  }, [children]);\n\n  const init = (width: number) => {\n    // initialize width\n    setTotalContentWidth(width);\n    // initialize total pages\n    const totalItems = items.length;\n    setTotalPages(totalItems);\n  };\n\n  const getPage = (event: NativeSyntheticEvent<NativeScrollEvent>) => {\n    const widthOffset = event.nativeEvent.contentOffset.x;\n\n    const widthOfEachItem = totalContentWidth / totalPages;\n    // const pageWidth = widthOfEachItem * itemsPerPage;\n\n    for (let page = 1; page <= totalPages; page++) {\n      if (widthOffset + 1 < widthOfEachItem * page) {\n        return page;\n      }\n\n      if (page === totalPages) {\n        return page;\n      }\n    }\n\n    return 0;\n  };\n\n  const internal_renderIndicators = () => {\n    if (renderIndicators) {\n      return renderIndicators({ selectedPage, totalPages });\n    }\n\n    return (\n      <Div flexDir=\"row\" justifyContent=\"center\" my=\"lg\">\n        {Array(totalPages)\n          .fill(0)\n          .map((_, index) => {\n            return (\n              <Div\n                w={10}\n                h={10}\n                rounded=\"circle\"\n                bg={selectedPage === index + 1 ? 'blue600' : 'gray400'}\n                mx=\"xs\"\n                key={index}\n              />\n            );\n          })}\n      </Div>\n    );\n  };\n\n  return (\n    <>\n      <ScrollDiv\n        {...props}\n        horizontal={true}\n        contentContainerStyle={{\n          width: `${100 * totalPages}%`,\n          flex: 1,\n        }}\n        showsHorizontalScrollIndicator={false}\n        onContentSizeChange={(w, _h) => init(w)}\n        onScroll={(data) => {\n          setTotalContentWidth(data.nativeEvent.contentSize.width);\n          setSelectedPage(getPage(data));\n        }}\n        scrollEventThrottle={200}\n        pagingEnabled\n        decelerationRate=\"fast\"\n      >\n        {items?.map((child, index) => (\n          <Div flex={1} key={index}>\n            {child}\n          </Div>\n        ))}\n      </ScrollDiv>\n\n      {showIndicators && internal_renderIndicators()}\n    </>\n  );\n};\n\nCarousel.Item = CarouselItem;\n\nexport { Carousel };\n"],"mappings":"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"}