{"version":3,"names":["MentionBase","React","Component","textInputHeight","isTrackingStarted","setState","onHide","props","lastKeyword","triggerCallback","val","trigger","triggerLocation","boundary","pattern","RegExp","keywordArray","match","length","updateSuggestions","state","children","onChangeText","lastChar","substr","wordBoundry","previousChar","trim","startTracking","stopTracking","identifyKeyword","render","m","mt","mr","mb","ml","p","pr","pt","pb","pl","borderColor","borderBottomColor","borderLeftColor","borderTopColor","borderRightColor","borderWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","borderTopWidth","rounded","roundedTop","roundedRight","roundedBottom","roundedLeft","renderItem","loading","data","rest","theme","computedStyle","getStyle","flex","list","rowData","cloneElement","Mention","withDefaultProps","bg","horizontal","shadow","shadowColor","keyboardShouldPersistTaps","position","bottom"],"sources":["mention.component.tsx"],"sourcesContent":["import React from 'react';\n\nimport { View, FlatList, ActivityIndicator } from 'react-native';\n\nimport { MentionProps } from './mention.type';\nimport { getStyle } from './mention.style';\nimport { ThemeContext } from '../../theme';\nimport { withDefaultProps } from '../../utilities/withDefaultProps';\nimport { DefaultProps } from '../../types';\n\nclass MentionBase extends React.Component<\n  MentionProps & DefaultProps<MentionProps>\n> {\n  previousChar = ' ';\n\n  isTrackingStarted = false;\n\n  state = {\n    textInputHeight: '',\n    isTrackingStarted: false,\n  };\n\n  startTracking = () => {\n    this.isTrackingStarted = true;\n    this.setState({\n      isTrackingStarted: true,\n    });\n  };\n\n  stopTracking = () => {\n    const { onHide } = this.props;\n\n    this.isTrackingStarted = false;\n    this.setState({\n      isTrackingStarted: false,\n    });\n\n    if (onHide) {\n      onHide();\n    }\n  };\n\n  updateSuggestions = (lastKeyword: string) => {\n    const { triggerCallback } = this.props;\n\n    triggerCallback(lastKeyword);\n  };\n\n  identifyKeyword = (val: string) => {\n    const { trigger, triggerLocation } = this.props;\n\n    if (this.isTrackingStarted) {\n      const boundary = triggerLocation === 'new-word-only' ? 'B' : '';\n      const pattern = new RegExp(\n        `\\\\${boundary}${trigger}[a-z0-9_-]+|\\\\${boundary}${trigger}`,\n        'gi'\n      );\n      const keywordArray = val.match(pattern);\n      if (keywordArray && !!keywordArray.length) {\n        const lastKeyword = keywordArray[keywordArray.length - 1];\n\n        this.updateSuggestions(lastKeyword);\n      }\n    }\n  };\n\n  /**\n   * on change text\n   */\n  onChangeText = (val: string) => {\n    const { isTrackingStarted } = this.state;\n    const { children, triggerLocation, trigger } = this.props;\n\n    if (children.props.onChangeText) {\n      children.props.onChangeText(val);\n    }\n\n    const lastChar = val.substr(val.length - 1);\n    const wordBoundry =\n      triggerLocation === 'new-word-only'\n        ? this.previousChar.trim().length === 0\n        : true;\n    if (lastChar === trigger && wordBoundry) {\n      this.startTracking();\n    } else if ((lastChar === ' ' && isTrackingStarted) || val === '') {\n      this.stopTracking();\n    }\n    this.previousChar = lastChar;\n    this.identifyKeyword(val);\n  };\n\n  resetTextbox = () => {\n    this.previousChar = ' ';\n    this.stopTracking();\n  };\n\n  render() {\n    const { isTrackingStarted } = this.state;\n\n    const {\n      m,\n      mt,\n      mr,\n      mb,\n      ml,\n      p,\n      pr,\n      pt,\n      pb,\n      pl,\n      borderColor,\n      borderBottomColor,\n      borderLeftColor,\n      borderTopColor,\n      borderRightColor,\n      borderWidth,\n      borderLeftWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderTopWidth,\n      rounded,\n      roundedTop,\n      roundedRight,\n      roundedBottom,\n      roundedLeft,\n      children,\n      renderItem,\n      loading,\n      data,\n      ...rest\n    } = this.props;\n\n    return (\n      <ThemeContext.Consumer>\n        {({ theme }) => {\n          const computedStyle = getStyle(theme, this.props);\n\n          return (\n            <View style={{ flex: 1 }}>\n              <>\n                {(data ?? []).length > 0 &&\n                  isTrackingStarted &&\n                  loading === false && (\n                    <FlatList\n                      data={data}\n                      showsVerticalScrollIndicator\n                      style={computedStyle.list}\n                      {...rest}\n                      renderItem={(rowData) => renderItem(rowData)}\n                    />\n                  )}\n                {loading && (\n                  <View style={computedStyle.loading}>\n                    <ActivityIndicator />\n                  </View>\n                )}\n              </>\n\n              <View>\n                {React.cloneElement(children, {\n                  onChangeText: this.onChangeText,\n                })}\n              </View>\n            </View>\n          );\n        }}\n      </ThemeContext.Consumer>\n    );\n  }\n}\n\nconst Mention = withDefaultProps<MentionProps>(MentionBase, 'Mention', {\n  bg: 'white',\n  rounded: 'md',\n  borderColor: 'gray200',\n  borderWidth: 1,\n  horizontal: false,\n  loading: false,\n  shadow: 1,\n  shadowColor: 'gray900',\n  keyboardShouldPersistTaps: 'always',\n  trigger: '@',\n  position: 'absolute',\n  bottom: 0,\n  onHide: () => {},\n});\n\nexport { Mention };\n"],"mappings":"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"}