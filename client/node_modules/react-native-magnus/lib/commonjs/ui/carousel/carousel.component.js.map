{"version":3,"names":["Carousel","incomingProps","props","useDefaultProps","showIndicators","children","renderIndicators","selectedPage","setSelectedPage","React","useState","totalPages","setTotalPages","totalContentWidth","setTotalContentWidth","items","useMemo","Children","map","child","isValidElement","type","CarouselItem","console","warn","init","width","totalItems","length","getPage","event","widthOffset","nativeEvent","contentOffset","x","widthOfEachItem","page","internal_renderIndicators","Array","fill","_","index","flex","w","_h","data","contentSize","Item"],"sources":["carousel.component.tsx"],"sourcesContent":["import React from 'react';\nimport { NativeScrollEvent, NativeSyntheticEvent } from 'react-native';\nimport { useDefaultProps } from '../../utilities/useDefaultProps';\nimport { Div } from '../div/div.component';\nimport { ScrollDiv } from '../scrolldiv/scrolldiv.component';\n\nimport { CarouselProps, CompoundedCarousel } from './carousel.type';\nimport CarouselItem from './item.carousel';\n\nconst Carousel: CompoundedCarousel<CarouselProps> = (incomingProps) => {\n  const props = useDefaultProps('Carousel', incomingProps, {\n    showIndicators: true,\n  });\n\n  const { children, renderIndicators, showIndicators } = props;\n  const [selectedPage, setSelectedPage] = React.useState(1);\n  const [totalPages, setTotalPages] = React.useState(1);\n  const [totalContentWidth, setTotalContentWidth] = React.useState(0);\n\n  const items: JSX.Element[] = React.useMemo(() => {\n    return (\n      React.Children.map(children, (child) => {\n        if (!React.isValidElement(child)) {\n          return;\n        }\n\n        if (child.type === CarouselItem) {\n          return child;\n        }\n\n        console.warn(\n          'Only children of type Carousel.Item are allowed here. Any other child components will be ignored.'\n        );\n        return null;\n      }) ?? []\n    );\n  }, [children]);\n\n  const init = (width: number) => {\n    // initialize width\n    setTotalContentWidth(width);\n    // initialize total pages\n    const totalItems = items.length;\n    setTotalPages(totalItems);\n  };\n\n  const getPage = (event: NativeSyntheticEvent<NativeScrollEvent>) => {\n    const widthOffset = event.nativeEvent.contentOffset.x;\n\n    const widthOfEachItem = totalContentWidth / totalPages;\n    // const pageWidth = widthOfEachItem * itemsPerPage;\n\n    for (let page = 1; page <= totalPages; page++) {\n      if (widthOffset + 1 < widthOfEachItem * page) {\n        return page;\n      }\n\n      if (page === totalPages) {\n        return page;\n      }\n    }\n\n    return 0;\n  };\n\n  const internal_renderIndicators = () => {\n    if (renderIndicators) {\n      return renderIndicators({ selectedPage, totalPages });\n    }\n\n    return (\n      <Div flexDir=\"row\" justifyContent=\"center\" my=\"lg\">\n        {Array(totalPages)\n          .fill(0)\n          .map((_, index) => {\n            return (\n              <Div\n                w={10}\n                h={10}\n                rounded=\"circle\"\n                bg={selectedPage === index + 1 ? 'blue600' : 'gray400'}\n                mx=\"xs\"\n                key={index}\n              />\n            );\n          })}\n      </Div>\n    );\n  };\n\n  return (\n    <>\n      <ScrollDiv\n        {...props}\n        horizontal={true}\n        contentContainerStyle={{\n          width: `${100 * totalPages}%`,\n          flex: 1,\n        }}\n        showsHorizontalScrollIndicator={false}\n        onContentSizeChange={(w, _h) => init(w)}\n        onScroll={(data) => {\n          setTotalContentWidth(data.nativeEvent.contentSize.width);\n          setSelectedPage(getPage(data));\n        }}\n        scrollEventThrottle={200}\n        pagingEnabled\n        decelerationRate=\"fast\"\n      >\n        {items?.map((child, index) => (\n          <Div flex={1} key={index}>\n            {child}\n          </Div>\n        ))}\n      </ScrollDiv>\n\n      {showIndicators && internal_renderIndicators()}\n    </>\n  );\n};\n\nCarousel.Item = CarouselItem;\n\nexport { Carousel };\n"],"mappings":"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"}